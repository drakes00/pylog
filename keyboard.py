class Keyboard:
    _key_mapping = {
        1: {
            2: "<esc>",
            4: ("1", "!"),
            8: ("2", "@"),
            16: ("3", "#"),
            32: ("4", "$"),
            64: ("5", "%"),
            128: ("6", "^"),
        },
        2: {
            1: ("7", "&"),
            2: ("8", "*"),
            4: ("9", "("),
            8: ("0", ")"),
            16: ("-", "_"),
            32: ("=", "+"),
            64: "<backspace>",
            128: "<tab>",
        },
        3: {
            1: ("q", "Q"),
            2: ("w", "W"),
            4: ("e", "E"),
            8: ("r", "R"),
            16: ("t", "T"),
            32: ("y", "Y"),
            64: ("u", "U"),
            128: ("i", "I"),
        },
        4: {
            1: ("o", "O"),
            2: ("p", "P"),
            4: ("[", "{"),
            8: ("]", "}"),
            16: "<enter>\n",
            #32: "<left ctrl>",
            64: ("a", "A"),
            128: ("s", "S"),
        },
        5: {
            1: ("d", "D"),
            2: ("f", "F"),
            4: ("g", "G"),
            8: ("h", "H"),
            16: ("j", "J"),
            32: ("k", "K"),
            64: ("l", "L"),
            128: (";", ":"),
        },
        6: {
            1: ("'", "\""),
            2: ("`", "~"),
            #4: "<left shift>",
            8: ("\\", "|"),
            16: ("z", "Z"),
            32: ("x", "X"),
            64: ("c", "C"),
            128: ("v", "V"),
        },
        7: {
            1: ("b", "B"),
            2: ("n", "N"),
            4: ("m", "M"),
            8: (",", "<"),
            16: (".", ">"),
            32: ("/", "?"),
            #64: "<right shift>",
        },
        8: {
            #1: "<left alt>",
            2: " ",
            4: "<caps lock>",
        },
        13: {
            #2: "<right ctrl>",
            #16: "<right alt>",
        },
    }

    def getKeys(self, state):
        ret = []

        for i,k in enumerate(state):
            o = ord(k)
            if o:
                try:
                    ret.append(self._key_mapping[i][o])
                except:
                    pass

        return ret
